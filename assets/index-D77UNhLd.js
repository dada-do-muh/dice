import{j as e,a}from"./chart-js-DOUloTE5.js";import{u as t,M as r,a as s,b as d,c as i,d as l,I as c,s as n,T as o,N as g,f as x,e as m}from"./index-BG08Sq68.js";import{C as h,g as b,D as p,S as y,i as k,h as j}from"./index-BG08Sq68.js";import"./vendor-BiSKwQJc.js";const u=({onClose:a})=>{const{t:l}=t(["about","changelog","common"]),c=l("changelog:entries",{returnObjects:!0}),n=c[0]?.version||"N/A",o=c[0]?.date||"N/A";return e.jsxs(r,{isOpen:!0,onClose:a,size:"2xl",children:[e.jsx(s,{title:l("about:title"),onClose:a,closeButtonLabel:l("about:close")}),e.jsx(d,{scrollable:!0,children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-white",children:l("about:sections.app.title")}),e.jsx("p",{className:"leading-relaxed",children:l("about:sections.app.description",{siteName:l("common:siteName")})})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-white",children:l("about:sections.data.title")}),e.jsx("ul",{className:"list-disc pl-4 space-y-2 leading-relaxed",children:l("about:sections.data.items",{returnObjects:!0}).map((a,t)=>e.jsx("li",{children:a},t))})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-white",children:l("about:sections.disclaimer.title")}),e.jsx("ul",{className:"list-disc pl-4 space-y-2 leading-relaxed",children:l("about:sections.disclaimer.items",{returnObjects:!0}).map((a,t)=>e.jsx("li",{children:a},t))})]}),e.jsxs("section",{className:"mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold mb-3 text-gray-800 dark:text-white",children:l("about:sections.libraries.title")}),e.jsx("p",{className:"leading-relaxed mb-2",children:l("about:sections.libraries.description")}),e.jsx("ul",{className:"list-disc pl-4 space-y-1 leading-relaxed text-sm",children:l("about:sections.libraries.items",{returnObjects:!0}).map((a,t)=>e.jsx("li",{children:a},t))})]}),e.jsxs("section",{className:"text-right text-sm text-gray-500 dark:text-gray-400 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{children:l("about:sections.version.version",{version:n})}),e.jsx("p",{children:l("about:sections.version.lastUpdated",{date:o})})]})]})}),e.jsx(i,{sticky:!0,className:"bg-gray-50 dark:bg-gray-900",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-2 bg-accent-light-500 dark:bg-accent-dark-500 hover:bg-accent-light-600 dark:hover:bg-accent-dark-600 text-white font-semibold rounded-lg transition-colors",children:l("common:button.close")})})]})},N=({onClose:a})=>{const{t:l}=t(["changelog","common"]);return e.jsxs(r,{isOpen:!0,onClose:a,size:"2xl",children:[e.jsx(s,{title:l("changelog:title"),onClose:a,closeButtonLabel:l("common:close")}),e.jsx(d,{scrollable:!0,children:e.jsx("div",{className:"space-y-4",children:l("changelog:entries",{returnObjects:!0}).map((a,t)=>e.jsxs("div",{className:"border-l-2 border-accent-light-500 dark:border-accent-dark-500 pl-4 py-2",children:[e.jsxs("div",{className:"flex items-baseline gap-2 mb-2",children:[e.jsxs("span",{className:"font-semibold text-gray-800 dark:text-white",children:["v",a.version]}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["(",a.date,")"]})]}),e.jsx("div",{className:"space-y-2",children:["added","changed","fixed","removed","security"].map(t=>{const r=a.changes[t];return r&&0!==r.length?e.jsxs("div",{className:"mb-3",children:[e.jsx("span",{className:"text-xs font-bold border border-accent-light-500 dark:border-accent-dark-600 bg-accent-light-100 dark:bg-gray-800 text-accent-light-700 dark:text-accent-dark-300 px-4 py-1 rounded-xl",children:l(`changelog:categories.${t}`)}),e.jsx("ul",{className:"list-disc pl-4 text-sm mt-1",children:r.map((a,t)=>e.jsx("li",{children:a},t))})]},t):null})})]},t))})}),e.jsx(i,{sticky:!0,className:"bg-gray-50 dark:bg-gray-900",children:e.jsx("button",{onClick:a,className:"w-full px-4 py-2 bg-accent-light-500 dark:bg-accent-dark-500 hover:bg-accent-light-600 dark:hover:bg-accent-dark-600 text-white font-semibold rounded-lg transition-colors",children:l("common:button.close")})})]})},f=({isOpen:t,onClose:n,onOpenAbout:o})=>{const{t:g,tRaw:x}=l("help"),[m,h]=a.useState("basics"),b=[{id:"basics",label:String(x("basicSettings.diceNotation.title")).replace("について",""),icon:"dice"},{id:"charts",label:String(x("resultDisplay.chart.label")),icon:"chart-bar"},{id:"data",label:String(x("globalSettings.dataManagement.label")),icon:"clipboard"},{id:"about",label:String(x("title")),icon:"info"}];return e.jsxs(r,{isOpen:t,onClose:n,size:"2xl",children:[e.jsx(s,{title:x("title"),onClose:n,closeButtonLabel:x("closeButton")}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50 px-4",children:e.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:b.map(a=>e.jsxs("button",{onClick:()=>h(a.id),className:`\n                flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap\n                ${m===a.id?"border-accent-light-500 text-accent-light-600 dark:border-accent-dark-500 dark:text-accent-dark-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"}\n              `,children:[e.jsx(c,{name:a.icon,className:"w-4 h-4"}),a.label]},a.id))})}),e.jsx(d,{scrollable:!0,className:"p-0",children:e.jsxs("div",{className:"p-6",children:["basics"===m&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded bg-accent-light-100 dark:bg-accent-dark-900 text-accent-light-600 dark:text-accent-dark-300 text-xs",children:"1"}),g("basicSettings.diceNotation.title")]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 mb-4 shadow-sm",children:[e.jsxs("div",{className:"font-mono text-lg font-bold text-center mb-2",children:["dice",e.jsxs("span",{className:"text-accent-light-600 dark:text-accent-dark-400",children:["[",g("basicSettings.diceNotation.parameters.count.label"),"]"]}),"d",e.jsxs("span",{className:"text-accent-light-600 dark:text-accent-dark-400",children:["[",g("basicSettings.diceNotation.parameters.sides.label"),"]"]}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["(+|-)[",g("basicSettings.diceNotation.parameters.modifier.label"),"]"]})]}),e.jsx("p",{className:"text-center text-sm text-gray-500 dark:text-gray-400",children:g("basicSettings.diceNotation.description")})]}),e.jsxs("div",{className:"grid sm:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1",children:g("basicSettings.diceNotation.parameters.count.label")}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:g("basicSettings.diceNotation.parameters.count.description")})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1",children:g("basicSettings.diceNotation.parameters.sides.label")}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:g("basicSettings.diceNotation.parameters.sides.description")})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800/50 p-3 rounded border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1",children:g("basicSettings.diceNotation.parameters.modifier.label")}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:g("basicSettings.diceNotation.parameters.modifier.description")})]})]})]}),e.jsxs("section",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded bg-accent-light-100 dark:bg-accent-dark-900 text-accent-light-600 dark:text-accent-dark-300 text-xs",children:"2"}),g("basicSettings.examples.title")]}),e.jsx("div",{className:"grid gap-3",children:g("basicSettings.examples.items",{returnObjects:!0}).map((a,t)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 p-3 rounded-lg bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsx("code",{className:"px-2 py-1 bg-white dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-600 font-mono text-sm font-bold text-accent-light-600 dark:text-accent-dark-400 whitespace-nowrap",children:a.notation}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.description.replace("→ ","")})]},t))})]}),e.jsxs("section",{className:"bg-blue-50 dark:bg-blue-900/10 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-2",children:g("basicSettings.trials.title")}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:g("basicSettings.trials.description")})]})]}),"charts"===m&&e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g("resultDisplay.chart.label")}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2 text-accent-light-600 dark:text-accent-dark-400",children:[e.jsx(c,{name:"chart-total-distribution",className:"w-6 h-6"}),g("resultDisplay.chart.types.distribution.title")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"最も基本的なグラフです。どの合計値がどれくらいの確率で出るかがわかります。"}),e.jsxs("ul",{className:"text-xs space-y-1 text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"• 平均値、中央値の表示"}),e.jsx("li",{children:"• 棒グラフ/折れ線グラフ切り替え"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2 text-accent-light-600 dark:text-accent-dark-400",children:[e.jsx(c,{name:"chart-cumulative-distribution",className:"w-6 h-6"}),g("resultDisplay.chart.types.cumulative.title")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"「〇〇以下の値が出る確率」や「〇〇以上の値が出る確率」を確認するのに便利です。"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2 text-accent-light-600 dark:text-accent-dark-400",children:[e.jsx(c,{name:"chart-roll-progress",className:"w-6 h-6"}),g("resultDisplay.chart.types.progress.title")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"ダイスを振るごとに合計値がどう変化したかを時系列で表示します。"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2 text-accent-light-600 dark:text-accent-dark-400",children:[e.jsx(c,{name:"chart-individual-dice",className:"w-6 h-6"}),g("resultDisplay.chart.types.individualDice.title")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:"それぞれのダイスの目が公平に出ているか（偏りがないか）を確認できます。"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 font-bold mb-2 text-accent-light-600 dark:text-accent-dark-400",children:[e.jsx(c,{name:"dice",className:"w-6 h-6"}),g("resultDisplay.chart.types.recentRolls.title")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:g("resultDisplay.chart.types.recentRolls.features",{returnObjects:!0})?.[0]})]})]})]}),e.jsxs("div",{className:"sm:col-span-2 space-y-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g("advancedFeatures.title")}),e.jsxs("div",{className:"bg-accent-light-50 dark:bg-accent-dark-900/10 p-4 rounded-lg border border-accent-light-100 dark:border-accent-dark-900/50",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:g("advancedFeatures.widgetManagement.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:g("advancedFeatures.widgetManagement.description")}),e.jsx("ul",{className:"grid sm:grid-cols-2 gap-2 text-sm",children:g("advancedFeatures.widgetManagement.features",{returnObjects:!0}).map((a,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(c,{name:"check",className:"w-4 h-4 text-accent-light-500 dark:text-accent-dark-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a})]},t))})]}),e.jsxs("div",{className:"bg-accent-light-50 dark:bg-accent-dark-900/10 p-4 rounded-lg border border-accent-light-100 dark:border-accent-dark-900/50",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:g("advancedFeatures.chartSettings.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:g("advancedFeatures.chartSettings.description")}),e.jsx("ul",{className:"grid sm:grid-cols-2 gap-2 text-sm",children:g("advancedFeatures.chartSettings.features",{returnObjects:!0}).map((a,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(c,{name:"check",className:"w-4 h-4 text-accent-light-500 dark:text-accent-dark-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a})]},t))})]}),e.jsxs("div",{className:"bg-accent-light-50 dark:bg-accent-dark-900/10 p-4 rounded-lg border border-accent-light-100 dark:border-accent-dark-900/50",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:g("advancedFeatures.dataAggregation.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:g("advancedFeatures.dataAggregation.description")}),e.jsx("ul",{className:"space-y-2 text-sm",children:g("advancedFeatures.dataAggregation.features",{returnObjects:!0}).map((a,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-gray-500 mt-0.5 flex-shrink-0",children:"•"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:a.label}),a.description&&e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[" - ",a.description]})]})]},t))})]})]})]})}),"data"===m&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g("resultDisplay.table.label")}),e.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm mb-3",children:g("resultDisplay.table.description")}),e.jsx("ul",{className:"space-y-2 text-sm",children:g("resultDisplay.table.features",{returnObjects:!0}).map((a,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(c,{name:"check",className:"w-4 h-4 text-accent-light-500 dark:text-accent-dark-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a})]},t))})]}),e.jsxs("div",{className:"bg-accent-light-50 dark:bg-accent-dark-900/10 p-4 rounded-lg border border-accent-light-100 dark:border-accent-dark-900/50",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white mb-2",children:g("advancedFeatures.filterSystem.title")}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 mb-3",children:g("advancedFeatures.filterSystem.description")}),e.jsx("ul",{className:"space-y-2 text-sm",children:g("advancedFeatures.filterSystem.features",{returnObjects:!0}).map((a,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(c,{name:"filter",className:"w-4 h-4 text-accent-light-500 dark:text-accent-dark-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a})]},t))})]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g("diceSetManagement.diceSetFeatures.title")}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:g("diceSetManagement.diceSetFeatures.features",{returnObjects:!0}).map((a,t)=>e.jsxs("div",{className:"p-3 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx(c,{name:"check",className:"w-4 h-4 text-accent-light-500 dark:text-accent-dark-500 mt-1 flex-shrink-0"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:a})]},t))})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g("operations.dataExport.title")}),e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:g("operations.dataExport.features",{returnObjects:!0}).map((a,t)=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"font-bold text-gray-900 dark:text-gray-100 mb-1",children:a.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:a.description})]},t))})]})]}),"about"===m&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:x("title")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:g("globalSettings.description")}),e.jsx("div",{className:"inline-block p-4 bg-accent-light-50 dark:bg-accent-dark-900/20 rounded-lg border border-accent-light-100 dark:border-accent-dark-800",children:e.jsxs("p",{className:"text-sm flex items-center justify-center gap-1",children:[g("aboutSection.description.before"),e.jsx("button",{onClick:()=>{n(),o?.()},className:"text-accent-light-600 dark:text-accent-dark-400 hover:underline font-bold px-1",children:g("aboutSection.linkText")}),g("aboutSection.description.after")]})})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4",children:g("globalSettings.appearance.label")}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"grid gap-2 text-sm",children:g("globalSettings.appearance.features",{returnObjects:!0}).map((a,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{name:"moon",className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:a})]},t))})})]})]})]})}),e.jsx(i,{sticky:!0,className:"bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:n,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 font-medium rounded-lg transition-colors",children:g("closeButton")})})]})},v=[{code:"ja",label:"日本語",badge:"JA"},{code:"en",label:"English",badge:"EN"}],w=({isOpen:i,onClose:l,darkMode:h,onChangeDarkMode:b,transparentExport:p,onChangeTransparentExport:y,onExportData:k,onImportData:j,diceSetsCount:u,chartSettingsCount:N,onAboutClick:f,onChangelogClick:w,chartHeightSettings:S,onChangeChartHeightSettings:C})=>{const{t:M,i18n:D}=t(["settings","common"]),[H,O]=a.useState(!1),[F,R]=a.useState(!1),E=a.useRef(null),B=e=>{C&&S&&C({...S,mode:e})},L=(e,a)=>{C&&S&&C({...S,["width"===e?"aspectRatioWidth":"aspectRatioHeight"]:a})};return e.jsxs(r,{isOpen:i,onClose:l,size:"lg",children:[e.jsx(s,{title:M("settings:title"),onClose:l,closeButtonLabel:M("settings:close")}),e.jsxs(d,{scrollable:!0,children:[e.jsxs("section",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-1 h-6 bg-gray-400 dark:bg-gray-500 rounded-full"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:M("settings:appearance.title")})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:M("settings:appearance.theme.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:M("settings:appearance.theme.description")}),e.jsxs("div",{className:"inline-flex rounded-lg bg-gray-200 dark:bg-gray-800 p-1 w-full",children:[e.jsxs("button",{onClick:()=>b("light"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-md font-medium transition-all "+("light"===h?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[e.jsx(c,{name:"sun",className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:M("settings:appearance.theme.light")})]}),e.jsxs("button",{onClick:()=>b("dark"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-md font-medium transition-all "+("dark"===h?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[e.jsx(c,{name:"moon",className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:M("settings:appearance.theme.dark")})]}),e.jsxs("button",{onClick:()=>b("system"),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-md font-medium transition-all "+("system"===h?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[e.jsx(c,{name:"settings",className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:M("settings:appearance.theme.system")})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700 mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:M("settings:appearance.language.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:M("settings:appearance.language.description")}),e.jsx("div",{className:"inline-flex rounded-lg bg-gray-200 dark:bg-gray-800 p-1 w-full",children:v.map(a=>e.jsxs("button",{onClick:()=>{D.language!==a.code&&(D.changeLanguage(a.code),n(a.code))},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-md font-medium transition-all "+(D.language===a.code?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:[e.jsx("span",{className:"font-bold text-xs px-1.5 py-0.5 rounded bg-gray-300 dark:bg-gray-600",children:a.badge}),e.jsx("span",{children:a.label})]},a.code))})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700 mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:M("settings:appearance.chartImage.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:M("settings:appearance.chartImage.description")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm font-medium text-gray-800 dark:text-white",children:M("settings:appearance.chartImage.transparentExport.label")}),e.jsx(o,{checked:p,onChange:y,label:M("settings:appearance.chartImage.transparentExport.label")})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:M("settings:appearance.chartImage.transparentExport.description")})]})]}),S&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700 mt-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:M("settings:appearance.chartHeight.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:M("settings:appearance.chartHeight.description")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"inline-flex rounded-lg bg-gray-200 dark:bg-gray-800 p-1 w-full",children:[e.jsx("button",{onClick:()=>B("aspect-ratio"),className:"flex-1 px-4 py-2.5 rounded-md font-medium transition-all "+("aspect-ratio"===S.mode?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:M("settings:appearance.chartHeight.mode.aspectRatio")}),e.jsx("button",{onClick:()=>B("fixed-height"),className:"flex-1 px-4 py-2.5 rounded-md font-medium transition-all "+("fixed-height"===S.mode?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:M("settings:appearance.chartHeight.mode.fixedHeight")})]}),"aspect-ratio"===S.mode&&e.jsxs("div",{className:"flex gap-4 flex-col sm:flex-row",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:M("settings:appearance.chartHeight.aspectRatio.presetsLabel")}),e.jsx("div",{className:"inline-flex rounded-lg bg-gray-200 dark:bg-gray-800 p-1",children:["2:1","16:9","4:3","1:1"].map(a=>{const[t,r]=a.split(":").map(Number),s=S.aspectRatioWidth===t&&S.aspectRatioHeight===r;return e.jsx("button",{type:"button",onMouseDown:e=>e.preventDefault(),onClick:()=>{return e=t,a=r,void(C&&S&&C({...S,aspectRatioWidth:e,aspectRatioHeight:a}));var e,a},className:"px-4 py-1 rounded-md text-sm font-medium transition-all "+(s?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"),children:M(`settings:appearance.chartHeight.aspectRatio.presets.${a.replace(":","-")}`)},a)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:M("settings:appearance.chartHeight.aspectRatio.customLabel")}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-16",children:e.jsx(g,{value:S.aspectRatioWidth??16,onChange:e=>L("width",e),min:1,max:999,className:"w-full px-2 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-sm text-center"})}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-medium px-1",children:":"}),e.jsx("div",{className:"w-16",children:e.jsx(g,{value:S.aspectRatioHeight??9,onChange:e=>L("height",e),min:1,max:999,className:"w-full px-2 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-sm text-center"})})]}),e.jsx("div",{children:e.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 ml-2",children:["(",M("settings:appearance.chartHeight.aspectRatio.widthLabel")," : ",M("settings:appearance.chartHeight.aspectRatio.heightLabel"),")"]})})]})]}),"fixed-height"===S.mode&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2 block",children:M("settings:appearance.chartHeight.fixedHeight.label")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{value:S.fixedHeight??400,onChange:e=>{C&&S&&C({...S,fixedHeight:e})},min:200,max:800,className:"w-24 px-2 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-sm text-center"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"px"})]}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:M("settings:appearance.chartHeight.fixedHeight.help")})]})]})]})]}),e.jsxs("section",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-1 h-6 bg-gray-400 dark:bg-gray-500 rounded-full"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white",children:M("settings:dataManagement.title")})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700 mb-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(c,{name:"info",className:"w-5 h-5 text-gray-600 dark:text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("p",{className:"font-medium mb-1",children:M("settings:dataManagement.currentData.title")}),e.jsx("p",{children:M("settings:dataManagement.currentData.diceSets").replace("{{count}}",x(u))}),e.jsx("p",{children:M("settings:dataManagement.currentData.chartSettings").replace("{{count}}",x(N))})]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700 mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:M("settings:dataManagement.backup.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:M("settings:dataManagement.backup.description")}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:k,disabled:0===u,className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-800 dark:bg-gray-600 dark:hover:bg-gray-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[e.jsx(c,{name:"export",className:"w-4 h-4"}),M("settings:dataManagement.backup.export")]}),e.jsxs("button",{onClick:()=>{E.current?.click()},className:"w-full px-4 py-2 bg-gray-700 hover:bg-gray-800 dark:bg-gray-600 dark:hover:bg-gray-700 text-white font-medium rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(c,{name:"import",className:"w-4 h-4"}),M("settings:dataManagement.backup.import")]}),e.jsx("input",{ref:E,type:"file",accept:".json",onChange:e=>{const a=e.target.files?.[0];a&&(j(a),E.current&&(E.current.value=""))},className:"hidden"})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:M("settings:dataManagement.reset.title")}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:M("settings:dataManagement.reset.description")}),H?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-semibold text-red-600 dark:text-red-400",children:M("settings:dataManagement.reset.confirm")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{R(!0);try{if(await m(),await new Promise((e,a)=>{const t=indexedDB.deleteDatabase("DiceSimulatorDB");t.onsuccess=()=>{e()},t.onerror=()=>{a(new Error(M("settings:system.resetError")))},t.onblocked=()=>{setTimeout(()=>e(),1e3)}}),localStorage.clear(),"caches"in window){const e=await caches.keys();await Promise.all(e.map(e=>caches.delete(e)))}window.location.reload()}catch(e){setTimeout(()=>{window.location.reload()},500)}},className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:F,children:F?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(c,{name:"spinner",className:"w-4 h-4 animate-spin"}),M("settings:dataManagement.reset.processing")]}):M("settings:dataManagement.reset.confirmButton")}),e.jsx("button",{onClick:()=>O(!1),className:"flex-1 px-4 py-2 bg-gray-300 hover:bg-gray-400 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-800 dark:text-white font-medium rounded-lg transition-colors",disabled:F,children:M("settings:dataManagement.reset.cancel")})]})]}):e.jsx("button",{onClick:()=>O(!0),className:"w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:F,children:M("settings:dataManagement.reset.button")})]})]}),f&&e.jsx("section",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>{f(),l()},className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center justify-between group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:M("about:sections.app.title")}),e.jsx(c,{name:"chevron-right",className:"w-5 h-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})]})}),w&&e.jsx("section",{className:f?"":"pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:()=>{w(),l()},className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors flex items-center justify-between group",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:M("changelog:title")}),e.jsx(c,{name:"chevron-right",className:"w-5 h-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300 transition-colors"})]})})]})]})};export{u as AboutPage,N as ChangelogModal,h as ChartFullscreenModal,b as CompareDiceSetsModal,p as DiceConfigModal,f as HelpModal,y as SettingsEditorModal,w as SettingsModal,k as TableFilterSetEditor,j as TableFilterSetManager};
